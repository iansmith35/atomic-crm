<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISHE GROUP CRM - Multi-Agent Office System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="config.js"></script>
    <script src="auth.js"></script>
</head>
<body class="bg-gray-900 text-white">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-gray-800 p-8 text-center relative">
            <!-- Logout Button -->
            <div class="absolute top-4 right-4">
                <button onclick="logout()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm font-semibold">
                    üö™ Logout
                </button>
            </div>
            
            <h1 class="text-4xl font-bold text-blue-400 mb-2">‚öõÔ∏è ISHE Group CRM</h1>
            <p class="text-gray-300">Multi-Agent Autonomous Business Operations</p>
            <div class="mt-4 flex justify-center space-x-8">
                <div class="text-center">
                    <div class="text-2xl font-bold text-blue-400">42</div>
                    <div class="text-sm text-gray-400">Active Tasks</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-green-400">11</div>
                    <div class="text-sm text-gray-400">Offices Online</div>
                </div>
            </div>
        </header>

        <!-- Offices Grid -->
        <main class="p-8">
            <h2 class="text-2xl font-bold mb-8 text-center">Your Office Network</h2>
            <div class="grid md:grid-cols-3 gap-6 max-w-6xl mx-auto">

 <!-- CEO Office -->
                <div class="bg-gradient-to-br from-purple-600 to-pink-600 p-6 rounded-xl">
                    <div class="text-4xl mb-4">üíº</div>
                    <h3 class="text-xl font-bold">CEO Office</h3>
                    <p class="text-sm opacity-90">CEO </p>
                    <p class="text-sm opacity-80 mb-4">Executive oversight</p>
                    <div class="text-lg font-bold mb-4">12 Active Tasks</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="window.location.href='ceo-office.html'">
                        Open CEO Office
                    </button>
                </div>
                
                <!-- IT Office -->
                <div class="bg-gradient-to-br from-blue-500 to-purple-600 p-6 rounded-xl">
                    <div class="text-4xl mb-4">üîß</div>
                    <h3 class="text-xl font-bold">IT Office</h3>
                    <p class="text-sm opacity-90">Rube </p>
                    <p class="text-sm opacity-80 mb-4">Technical support & development</p>
                    <div class="text-lg font-bold mb-4">8 Active Tasks</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="window.location.href='it-office.html'">
                        Open IT Office
                    </button>
                </div>

                               <!-- Admin Mail Room -->
                <div class="bg-gradient-to-br from-green-500 to-teal-600 p-6 rounded-xl">
                    <div class="text-4xl mb-4">üì¨</div>
                    <h3 class="text-xl font-bold">Admin Mail Room</h3>
                    <p class="text-sm opacity-90">Stacy Smith Admin Manager </p>
                    <p class="text-sm opacity-80 mb-4">Gmail AI Assistant</p>
                    <div class="text-lg font-bold mb-4">15 Active Tasks</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="window.location.href='communications-office.html'">
                        Open Admin Mail Room
                    </button>
                </div>

                <!-- Virtual Engineer -->
                <div class="bg-gradient-to-br from-yellow-500 to-orange-600 p-6 rounded-xl">
                    <div class="text-4xl mb-4">‚öôÔ∏è</div>
                    <h3 class="text-xl font-bold">Virtual Engineer</h3>
                    <p class="text-sm opacity-90">Virtual Ian</p>
                    <p class="text-sm opacity-80 mb-4">Gas safety certificates</p>
                    <div class="text-lg font-bold mb-4">6 Active Tasks</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="window.location.href='virtual-engineer-office.html'">
                        Open Engineer Office
                    </button>
                </div>

                <!-- ISHE Group Accounts -->
                <div class="bg-gradient-to-br from-emerald-500 to-green-600 p-6 rounded-xl">
                    <div class="text-4xl mb-4">üí∞</div>
                    <h3 class="text-xl font-bold">Accounts Office</h3>
                    <p class="text-sm opacity-90">Philip Jones Accounts Manger </p>
                    <p class="text-sm opacity-80 mb-4">Custom accounting system</p>
                    <div class="text-lg font-bold mb-4">4 Active Tasks</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="window.location.href='accounts-office.html'">
                        Open Accounts
                    </button>
                </div>

                <!-- Logistics -->
                <div class="bg-gradient-to-br from-indigo-500 to-purple-600 p-6 rounded-xl">
                    <div class="text-4xl mb-4">üìÖ</div>
                    <h3 class="text-xl font-bold">Logistics</h3>
                    <p class="text-sm opacity-90">Logistics</p>
                    <p class="text-sm opacity-80 mb-4">Calendar management</p>
                    <div class="text-lg font-bold mb-4">7 Active Tasks</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="window.location.href='Logistics-office.html'">
                        Open Logistics
                    </button>
                </div>

                <!-- Kinky Brizzle -->
                <div class="bg-gradient-to-br from-pink-500 to-rose-600 p-6 rounded-xl">
                    <div class="text-4xl mb-4">üé≠</div>
                    <h3 class="text-xl font-bold">KinkyBrizzle</h3>
                    <p class="text-sm opacity-90">KinkyBrizzle AI</p>
                    <p class="text-sm opacity-80 mb-4">Adult brand management + Printful</p>
                    <div class="text-lg font-bold mb-4">23 Active Orders</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="window.location.href='kinky-brizzle-office.html'">
                        Open KinkyBrizzle
                    </button>
                </div>

                <!-- Event Safe -->
                <div class="bg-gradient-to-br from-cyan-500 to-blue-600 p-6 rounded-xl">
                    <div class="text-4xl mb-4">üéâ</div>
                    <h3 class="text-xl font-bold">Events Safe Office</h3>
                    <p class="text-sm opacity-90">Events Safe </p>
                    <p class="text-sm opacity-80 mb-4">Event Safe Id</p>
                    <div class="text-lg font-bold mb-4">5 Active Tasks</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="alert('Opening Events Safe - Event Safe planning services')">
                        Open Events Safe
                    </button>
                </div>

                <!-- CoastView Park Holiday Letting Office -->
                <div class="bg-gradient-to-br from-teal-500 to-cyan-600 p-6 rounded-xl">
                    <div class="text-4xl mb-4">üè†</div>
                    <h3 class="text-xl font-bold">CoastView</h3>
                    <p class="text-sm opacity-90">Peter Ellis - Holiday Letting Admin</p>
                    <p class="text-sm opacity-80 mb-4">holiday letting management</p>
                    <div class="text-lg font-bold mb-4">15 Active Properties</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="window.location.href='coastview-office.html'">
                        Open CoastView Park
                    </button>
                </div>

                <!-- Music Production Studio -->
                <div class="bg-gradient-to-br from-purple-500 to-pink-500 p-6 rounded-xl">
                    <div class="text-4xl mb-4">üéµ</div>
                    <h3 class="text-xl font-bold">Music Studio</h3>
                    <p class="text-sm opacity-90">AI Producer & Real Studio</p>
                    <p class="text-sm opacity-80 mb-4">Professional music production</p>
                    <div class="text-lg font-bold mb-4">3 Active Projects</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="window.location.href='music-studio-office.html'">
                        Open Music Studio
                    </button>
                </div>

                <!-- Boss's Office -->
                <div class="bg-gradient-to-br from-gray-600 to-gray-800 p-6 rounded-xl">
                    <div class="text-4xl mb-4">üëî</div>
                    <h3 class="text-xl font-bold">Boss's Office</h3>
                    <p class="text-sm opacity-90">Executive AI Assistant</p>
                    <p class="text-sm opacity-80 mb-4">Strategic oversight & executive decisions</p>
                    <div class="text-lg font-bold mb-4">15 Executive Tasks</div>
                    <button class="w-full bg-white bg-opacity-20 p-2 rounded" onclick="window.location.href='boss-office.html'">
                        Open Boss's Office
                    </button>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800 text-center p-6 mt-12">
            <p class="text-gray-400"> ISHE Group </p>
        </footer>
    </div>

<!-- GLOBAL CRM SYNC DROP -->
<!-- Place this into Copilot, it will auto-insert across all HTML CRM rooms -->

<!-- STEP 1: Inject Google Auth & Supabase Setup -->
<script type="module">
  import { createClient } from 'https://esm.sh/@supabase/supabase-js'

  const SUPABASE_URL = 'https://ishehqihxbhwpwhfrvzo.supabase.co';
  const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY_HERE';
  const GOOGLE_CLIENT_ID = '624596716963-huc2ef9rt7q8vckvjtbr84tfrjbs5cic.apps.googleusercontent.com';
  const ALLOWED_EMAIL = 'ian@ishe-ltd.co.uk';

  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  // Inject Google Auth Button
  const loginContainer = document.querySelector('#login-section') || document.body;
  const loginButton = document.createElement('button');
  loginButton.innerText = 'Sign in with Google';
  loginButton.style = 'padding: 10px 20px; margin: 20px auto; display: block; background: #5c6bc0; color: white; border: none; border-radius: 5px; font-size: 16px;';
  loginContainer.appendChild(loginButton);

  loginButton.addEventListener('click', async () => {
    const { data, error } = await supabase.auth.signInWithOAuth({
      provider: 'google',
      options: {
        redirectTo: window.location.href,
      },
    });
    if (error) alert('Login failed: ' + error.message);
  });

  const { data: { session } } = await supabase.auth.getSession();
  const user = session?.user;

  if (!user || user.email !== ALLOWED_EMAIL) {
    document.body.innerHTML = '<h2 style="color:white;text-align:center;margin-top:20vh">Access Denied. Private System.</h2>';
  } else {
    console.log('‚úÖ Authenticated:', user.email);
  }
</script>

<!-- STEP 2: Inject Dynamic AI Voice & Bot Linking -->
<script>
  const officeMap = {
    'CEO Office': 'Brian',
    'Admin Mailroom': 'Stacy',
    'Logistics Office': 'Ellie',
    'Accounts Office': 'Ava',
    'Virtual Engineer': 'Riley',
    'Therapy Room': 'Luna',
    'Health & Fitness': 'Max',
    'Personal Banking': 'Kate',
    'Documents': 'Clerk',
    'Task Center': 'Tina',
  };

  const currentTitle = document.title.trim();
  const voice = officeMap[currentTitle] || 'Brian';

  window.addEventListener('DOMContentLoaded', () => {
    const aiAgent = document.querySelector('rube-chat-agent');
    if (aiAgent) {
      aiAgent.setAttribute('voice', voice);
      console.log(`üé§ Assigned AI voice for ${currentTitle}: ${voice}`);
    }
  });
</script>

<!-- STEP 3: Drop Root Agent if Absent -->
<script src="https://rube.app/embed/chat?agent=core&apikey=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOiJ1c2VyXzAxSzUyNDJUVllBTlBNTjIxTVdZWUtBVlk1Iiwib3JnSWQiOiJvcmdfMDFLNTI0MzI5TVkxOFo5SlhQQTJKM1kxOVkiLCJpYXQiOjE3NTkwNzMzNjB9.dlelFFUO-TRCVA4Q7d4n5xArhN5sxCBBm4VLFxmaMZM"></script>

</body>
</html>
