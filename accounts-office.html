<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accounts Office</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="shared-office-components.js"></script>
    <script src="https://rube.app/embed/chat?agent=crm-core-ai&apikey=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOiJ1c2VyXzAxSzUyNDJUVllBTlBNTjIxTVdZWUtBVlk1Iiwib3JnSWQiOiJvcmdfMDFLNTI0MzI5TVkxOFo5SlhQQTJKM1kxOVkiLCJpYXQiOjE3NTkwNzMzNjB9.dlelFFUO-TRCVA4Q7d4n5xArhN5sxCBBm4VLFxmaMZM" defer></script>
    
    <!-- Enhanced Styles -->
    <style>
        .enhanced-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .enhanced-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            transition: all 0.3s ease;
            transform: translate(-50%, -50%);
        }
        
        .enhanced-btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .nav-office-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 1px solid rgba(75, 85, 99, 0.5);
            background: rgba(55, 65, 81, 0.5);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }
        
        .nav-office-btn:hover {
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
            transform: translateY(-2px);
        }
        
        .ai-pulse-indicator {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .financial-card {
            transition: all 0.3s ease;
        }
        
        .financial-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .status.warning { background-color: #d97706; }
        .status.ok { background-color: #059669; }
        .status.alert { background-color: #dc2626; }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white min-h-screen">
    <div class="max-w-6xl mx-auto p-6">
        <!-- Enhanced Navigation Bar -->
        <nav class="bg-gray-800/90 backdrop-blur-sm border-b border-gray-700 p-4 mb-6 rounded-xl">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="window.location.href='index.html'" 
                            class="enhanced-btn bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-300">
                        ‚Üê Dashboard
                    </button>
                    <div class="flex items-center space-x-3">
                        <div class="text-2xl">üìä</div>
                        <div>
                            <h1 class="text-xl font-bold">Accounts Office</h1>
                            <p class="text-xs text-gray-400">Finance & bookkeeping management</p>
                        </div>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Quick Office Navigation -->
                    <div class="hidden md:flex space-x-2">
                        <button onclick="navigateToOffice('ai-chatbot.html')" 
                                class="nav-office-btn" title="AI Assistant">ü§ñ</button>
                        <button onclick="navigateToOffice('ceo-office.html')" 
                                class="nav-office-btn" title="CEO Office">üíº</button>
                        <button onclick="navigateToOffice('it-office.html')" 
                                class="nav-office-btn" title="IT Support">üíª</button>
                        <button onclick="navigateToOffice('scheduling-office.html')" 
                                class="nav-office-btn" title="Scheduling">üìÖ</button>
                    </div>
                    <!-- Status Indicator -->
                    <div class="text-right">
                        <div class="text-sm font-bold text-green-400" id="officeStatus">Online</div>
                        <div class="text-xs text-gray-400">Office Status</div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- AI Task Bar -->
        <div class="ai-task-bar bg-gradient-to-r from-gray-800 to-gray-700 rounded-xl p-4 mb-6 border border-gray-600">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="ai-pulse-indicator w-3 h-3 bg-green-500 rounded-full"></div>
                    <div>
                        <h3 class="font-semibold text-sm">AI Assistant Active</h3>
                        <p class="text-xs text-gray-400">Ready to help with Accounts Office tasks</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <button onclick="quickAIAction('create-task')" 
                            class="ai-quick-btn bg-blue-600/20 hover:bg-blue-600/40 px-3 py-1 rounded text-xs">
                        ‚úÖ New Task
                    </button>
                    <button onclick="quickAIAction('get-summary')" 
                            class="ai-quick-btn bg-purple-600/20 hover:bg-purple-600/40 px-3 py-1 rounded text-xs">
                        üìä Summary
                    </button>
                    <button onclick="toggleAIChat()" 
                            class="ai-quick-btn bg-green-600/20 hover:bg-green-600/40 px-3 py-1 rounded text-xs">
                        üí¨ Chat
                    </button>
                </div>
            </div>
            
            <!-- Expandable AI Chat -->
            <div id="aiChatPanel" class="ai-chat-panel mt-4 hidden">
                <div class="bg-gray-900 rounded-lg p-4">
                    <div id="aiChatMessages" class="h-32 overflow-y-auto mb-3 text-sm">
                        <div class="text-blue-400 mb-2">
                            <strong>AI:</strong> Hello! I'm ready to analyze your financial data and help with accounting tasks. What would you like to do?
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <input type="text" id="aiChatInput" 
                               placeholder="Ask about finances, create reports, manage invoices..." 
                               class="flex-1 bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm"
                               onkeypress="handleAIChatEnter(event)">
                        <button onclick="sendAIMessage()" 
                                class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm">
                            Send
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Header -->
        <div class="bg-gradient-to-r from-green-700 to-emerald-700 rounded-xl p-6 mb-8 shadow-2xl">
            <h2 class="text-2xl font-bold mb-2">üìä Accounts Office ‚Äî Finance & Bookkeeping</h2>
            <p class="text-green-100">Manage cashflow, invoices, receipts, and live AI bookkeeping chat.</p>
        </div>

        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Live Tasks Widget -->
            <div class="live-tasks-widget bg-gradient-to-br from-gray-800 to-gray-700 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold flex items-center">
                        üìã Active Tasks
                        <span class="ml-2 bg-blue-600 text-xs px-2 py-1 rounded-full" id="taskCount">0</span>
                    </h3>
                    <button onclick="refreshTasks()" 
                            class="text-gray-400 hover:text-white transition-colors">
                        üîÑ
                    </button>
                </div>
                
                <div id="tasksList" class="space-y-2 mb-4">
                    <!-- Tasks will be loaded here -->
                    <div class="animate-pulse">
                        <div class="bg-gray-600 h-4 rounded mb-2"></div>
                        <div class="bg-gray-600 h-4 rounded w-3/4"></div>
                    </div>
                </div>
                
                <div class="flex gap-2">
                    <button onclick="createNewTask()" 
                            class="flex-1 bg-green-600/20 hover:bg-green-600/40 border border-green-600/30 px-4 py-2 rounded text-sm transition-all">
                        ‚ûï New Task
                    </button>
                    <button onclick="viewAllTasks()" 
                            class="flex-1 bg-blue-600/20 hover:bg-blue-600/40 border border-blue-600/30 px-4 py-2 rounded text-sm transition-all">
                        üìã View All
                    </button>
                </div>
            </div>

            <!-- Enhanced Live Cashflow -->
            <div class="financial-card bg-gradient-to-br from-gray-800 to-gray-700 rounded-xl p-6 shadow-lg">
                <h3 class="text-lg font-semibold mb-3 flex items-center">üìà Live Cashflow</h3>
                <p class="text-gray-300 mb-3">Net Position: <strong class="text-green-400 text-xl">¬£12,847.32</strong></p>
                <ul class="space-y-2 text-gray-300 mb-4">
                    <li class="flex items-center justify-between">
                        <span>‚¨ÜÔ∏è Income (This Week):</span>
                        <span class="text-green-400 font-semibold">¬£5,420</span>
                    </li>
                    <li class="flex items-center justify-between">
                        <span>‚¨áÔ∏è Expenses (This Week):</span>
                        <span class="text-red-400 font-semibold">¬£2,300</span>
                    </li>
                    <li class="flex items-center justify-between">
                        <span>üí∞ Pending Invoices:</span>
                        <span class="text-yellow-400 font-semibold">4</span>
                    </li>
                </ul>
                <button class="w-full enhanced-btn bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded font-semibold">
                    Export CSV Report
                </button>
            </div>

            <!-- Enhanced Invoice Console -->
            <div class="financial-card bg-gradient-to-br from-gray-800 to-gray-700 rounded-xl p-6 shadow-lg">
                <h3 class="text-lg font-semibold mb-3 flex items-center">üßæ Invoice Console</h3>
                <ul class="space-y-3 text-gray-300 mb-4">
                    <li class="flex items-center justify-between p-3 bg-gray-900/50 rounded-lg">
                        <div>
                            <div class="font-medium">Jones Heating</div>
                            <div class="text-sm text-gray-400">¬£450.00</div>
                        </div>
                        <span class="status bg-yellow-600 px-2 py-1 rounded text-xs text-white">Due</span>
                    </li>
                    <li class="flex items-center justify-between p-3 bg-gray-900/50 rounded-lg">
                        <div>
                            <div class="font-medium">OVO Energy</div>
                            <div class="text-sm text-gray-400">¬£1,200.00</div>
                        </div>
                        <span class="status bg-green-600 px-2 py-1 rounded text-xs text-white">Paid</span>
                    </li>
                    <li class="flex items-center justify-between p-3 bg-gray-900/50 rounded-lg">
                        <div>
                            <div class="font-medium">Tenant Refund</div>
                            <div class="text-sm text-gray-400">¬£220.00</div>
                        </div>
                        <span class="status bg-red-600 px-2 py-1 rounded text-xs text-white">Overdue</span>
                    </li>
                </ul>
                <button class="w-full enhanced-btn bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-4 py-2 rounded font-semibold">
                    View All Invoices
                </button>
            </div>
        </div>

        <!-- Enhanced Upload Section -->
        <div class="mt-8 bg-gradient-to-br from-gray-800 to-gray-700 rounded-xl p-6 shadow-lg">
            <h3 class="text-lg font-semibold mb-3 flex items-center">üì• Upload Bank Statements</h3>
            <input type="file" multiple 
                   class="block w-full text-sm text-gray-300 border border-gray-600 rounded bg-gray-700 p-3 mb-4 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700" />
            <div class="flex gap-4">
                <button class="enhanced-btn bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 px-6 py-2 rounded font-semibold">
                    üîç Process & Analyze
                </button>
                <button class="enhanced-btn bg-gradient-to-r from-gray-600 to-gray-500 hover:from-gray-700 hover:to-gray-600 px-6 py-2 rounded font-semibold">
                    üìä Generate Report
                </button>
            </div>
        </div>
    </div>
            <p class="text-xs text-gray-500">Drag & drop CSVs or PDFs from Gmail or Google Drive.</p>
        </div>

        <div class="bg-gray-800 rounded-xl p-6 mb-6">
            <h3 class="text-lg font-semibold mb-3">ü§ñ Talk to Ava ‚Äì Accounts AI</h3>
            <script src="https://rube.app/embed/chat?agent=ava-accounts-ai&apikey=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOiJ1c2VyXzAxSzUyNDJUVllBTlBNTjIxTVdZWUtBVlk1Iiwib3JnSWQiOiJvcmdfMDFLNTI0MzI5TVkxOFo5SlhQQTJKM1kxOVkiLCJpYXQiOjE3NTkwNzMzNjB9.dlelFFUO-TRCVA4Q7d4n5xArhN5sxCBBm4VLFxmaMZM" defer></script>
        </div>

        <div class="bg-gray-800 rounded-xl p-6">

            <h3 class="text-lg font-semibold mb-3">üìò Finance Directive Pad</h3>
            <textarea 
                rows="4" 
                placeholder="Ava, always flag any invoice older than 14 days as priority..."
                class="w-full p-3 bg-gray-700 border border-gray-600 rounded text-gray-300 placeholder-gray-500"
            ></textarea>
            <button class="mt-3 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm">Update Directives</button>

            <h3 class="text-lg font-semibold mb-3">ü§ñ Chat with Ava ‚Äì Your Finance AI</h3>
            <script src="https://rube.app/embed/chat?agent=ava-accounts-ai&apikey=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOiJ1c2VyXzAxSzUyNDJUVllBTlBNTjIxTVdZWUtBVlk1Iiwib3JnSWQiOiJvcmdfMDFLNTI0MzI5TVkxOFo5SlhQQTJKM1kxOVkiLCJpYXQiOjE3NTkwNzMzNjB9.dlelFFUO-TRCVA4Q7d4n5xArhN5sxCBBm4VLFxmaMZM" defer></script>

        </div>

        <!-- Back Button -->
        <div class="mt-8 text-center">
            <a href="index.html" class="inline-block bg-gray-700 hover:bg-gray-600 px-6 py-3 rounded-lg font-semibold">
                ‚Üê Back to Office Dashboard
            </a>
        </div>
    </div>


    <script>
        function exportCSV() {
            alert('üìä Export CSV\n\nCashflow data exported successfully!\n\n‚úÖ File includes:\n‚Ä¢ Net position\n‚Ä¢ Weekly income/expenses\n‚Ä¢ Pending invoices\n‚Ä¢ Transaction history\n\nüìÅ Ready for download');
        }

        function viewAllInvoices() {
            alert('üßæ All Invoices\n\nShowing invoice summary:\n\nüìã Total invoices: 12\nüí∞ Outstanding amount: ¬£2,870\n‚úÖ Paid this month: ¬£8,420\n‚ö†Ô∏è Overdue invoices: 1\n\nüìä Full invoice management available');
        }

        function updateDirectives() {
            const textarea = document.querySelector('textarea[placeholder*="Ava"]');
            const directives = textarea.value.trim();
            
            if (directives) {
                alert(`üìò Finance Directives Updated\n\nNew instructions for Ava:\n"${directives}"\n\n‚úÖ Ava will apply these rules to all future financial operations`);
            } else {
                alert('üìò Finance Directives\n\nPlease enter specific instructions for Ava before updating directives.');
            }
        }

        function handleFileUpload(event) {
            const files = event.target.files;
            if (files.length > 0) {
                let fileList = '';
                for (let i = 0; i < files.length; i++) {
                    fileList += `‚Ä¢ ${files[i].name} (${(files[i].size / 1024).toFixed(1)} KB)\n`;
                }
                alert(`üì• Bank Statements Upload\n\n${fileList}\n‚úÖ Files ready for processing by Ava\nüìä Will be integrated into accounting system\nüí° AI will automatically categorize transactions`);
            }
        }

        // Add event listeners when page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Export CSV button
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                if (button.textContent.includes('Export CSV')) {
                    button.onclick = exportCSV;
                } else if (button.textContent.includes('View All Invoices')) {
                    button.onclick = viewAllInvoices;
                } else if (button.textContent.includes('Update Directives')) {
                    button.onclick = updateDirectives;
                }
            });
            
            // File upload input
            const fileInput = document.querySelector('input[type="file"]');
            if (fileInput) fileInput.onchange = handleFileUpload;
            
            // Initialize with sample directive text
            const textarea = document.querySelector('textarea[placeholder*="Ava"]');
            if (textarea && !textarea.value) {
                textarea.value = "Ava, always flag any invoice older than 14 days as priority...";
            }
        });

        function createInvoice() {
            alert('üìÑ Create Invoice\n\nPhilip can create invoices for all services:\n‚Ä¢ Gas Safety Certificates\n‚Ä¢ Event Planning\n‚Ä¢ Property Management\n\n‚úÖ Auto-integrated with accounting system');
        }

        function recordExpense() {
            alert('üí∏ Record Expense\n\nExpense categories:\n‚Ä¢ Office Supplies\n‚Ä¢ Equipment\n‚Ä¢ Professional Services\n\n‚úÖ Philip manages all business expenses');
        }

        function generateReport() {
            alert('üìà Financial Reports\n\nAvailable:\n‚Ä¢ P&L Statement\n‚Ä¢ Cash Flow\n‚Ä¢ Tax Summary\n\nüìä All auto-generated by Philip!');
        }

        function philipChat() {
            alert('üí¨ Message Philip\n\nPhilip manages the accounting system independently.\n\n‚úÖ He handles:\n‚Ä¢ Invoice creation\n‚Ä¢ Expense tracking\n‚Ä¢ Financial reporting\n‚Ä¢ VAT calculations');
        }

        function auditLog() {
            alert('üìú Audit Log\n\nRecent activities:\n‚Ä¢ Invoice created by Philip\n‚Ä¢ Expense recorded: ¬£125.50\n‚Ä¢ Payment received: ¬£85.00\n‚Ä¢ Monthly report generated\n\nüîç Full transparency!');
        }

        function migrationStatus() {
            alert('üîÑ QuickBooks Migration Status\n\n‚úÖ COMPLETE!\n\nMigrated:\n‚Ä¢ 3 years historical data\n‚Ä¢ All customer records\n‚Ä¢ Invoice templates\n‚Ä¢ Chart of accounts\n\nüéâ Philip now controls the system!');
        }

        function viewAllTransactions() {
            alert('üí≥ All Transactions\n\nShowing recent financial activity:\n\n‚úÖ 127 transactions this month\nüí∞ Total processed: ¬£45,230\nüìà Average transaction: ¬£356.14\nüéØ All reconciled and verified\n\nüìä Full details available in reports section');
        }

        // Task management functionality
        async function fetchAccountingTasks() {
            try {
                const res = await fetch("/api/tasks?office=accounts");
                const data = await res.json();
                const tasks = data.tasks || [];
                renderAccountingTasks(tasks);
            } catch (error) {
                console.log('API not available, using mock data:', error);
                // Fallback to mock data when API is not available
                const mockTasks = [
                    {
                        id: 1,
                        title: "Process month-end invoices",
                        status: "In Progress",
                        created_at: "2025-09-01T09:00:00Z",
                        updated_at: "2025-09-28T14:30:00Z"
                    },
                    {
                        id: 2,
                        title: "Reconcile bank statements",
                        status: "Pending",
                        created_at: "2025-09-15T10:00:00Z",
                        updated_at: "2025-09-25T16:20:00Z"
                    },
                    {
                        id: 3,
                        title: "Prepare quarterly VAT return",
                        status: "Done",
                        created_at: "2025-09-10T11:00:00Z",
                        updated_at: "2025-09-27T12:45:00Z"
                    }
                ];
                renderAccountingTasks(mockTasks);
            }
        }

        function renderAccountingTasks(tasks) {
            const taskList = document.getElementById('accountingTasks');
            if (!taskList) return;

            if (tasks.length === 0) {
                taskList.innerHTML = '<li class="p-4 bg-gray-800 border border-gray-600 rounded-xl shadow"><div class="text-gray-400 text-sm">No tasks found</div></li>';
                return;
            }

            taskList.innerHTML = tasks.map(task => `
                <li class="p-4 bg-gray-800 border border-gray-600 rounded-xl shadow">
                    <div class="font-semibold text-white">${task.title}</div>
                    <div class="text-sm text-gray-400">Status: ${task.status}</div>
                    <div class="text-xs text-gray-500">
                        Created: ${formatDate(task.created_at)} | Updated: ${formatDate(task.updated_at)}
                    </div>
                </li>
            `).join('');
        }

        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            try {
                const date = new Date(dateString);
                return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            } catch (error) {
                return dateString;
            }
        }

        // Initialize taskbar on page load
        document.addEventListener('DOMContentLoaded', () => {
            fetchAccountingTasks();
            // Refresh tasks every 30 seconds
            setInterval(fetchAccountingTasks, 30000);
        });
    </script>

<!-- GLOBAL CRM SETUP PAYLOAD FOR COPILOT DEPLOYMENT -->
<!-- DROP THIS INTO COPILOT AND DEPLOY ACROSS ALL HTML FILES -->
<!-- REPLACES GOOGLE AUTH, SUPERBASE CONNECTION, AND BACKEND SYNC -->

<!-- üß† LOAD RUBE CHATBOT WITH VOICE MAPPING -->
<script src="https://rube.app/embed/chat?agent=ellie-ai&apikey=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOiJ1c2VyXzAxSzUyNDJUVllBTlBNTjIxTVdZWUtBVlk1Iiwib3JnSWQiOiJvcmdfMDFLNTI0MzI5TVkxOFo5SlhQQTJKM1kxOVkiLCJpYXQiOjE3NTkwNzMzNjB9.dlelFFUO-TRCVA4Q7d4n5xArhN5sxCBBm4VLFxmaMZM"></script>
<script>
  const officeName = document.title || "CEO Office";
  const voiceMap = {
    "CEO Office": "Brian",
    "Admin Mailroom": "Stacy",
    "Logistics Office": "Ellie",
    "Accounts Office": "Ava",
    "Virtual Engineer": "Riley",
    "Therapy Room": "Luna"
  };
  window.addEventListener("load", () => {
    const aiAgent = document.querySelector("[rube-chat-agent]");
    if (aiAgent && voiceMap[officeName]) {
      aiAgent.setAttribute("voice", voiceMap[officeName]);
    }
  });
</script>

<!-- üîë SUPERBASE GLOBAL CONNECTION -->
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
  window.supabase = createClient(
    'https://mydxasjicsfetnglbppp.supabase.co',
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im15ZHhhc2ppY3NmZXRuZ2xicHBwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgyMjYyNTQsImV4cCI6MjA3MzgwMjI1NH0.zdJa3T1WDdc6_JNQbh93oB7CnVWa5TQ5jLb1UN-8dLE'
  );
</script>

<!-- DISABLED: Google OAuth Block
<!-- ‚úÖ GOOGLE SIGN-IN SYSTEM -->
<!-- <script src="https://accounts.google.com/gsi/client" async defer></script> (DISABLED) -->
<script>
  window.onload = () => {
    google.accounts.id.initialize({
      client_id: "624596716963-huc2ef9rt7q8vckvjtbr84tfrjbs5cic.apps.googleusercontent.com",
      callback: handleCredentialResponse
    });
    google.accounts.id.renderButton(
      document.getElementById("gSignIn"),
      { theme: "outline", size: "large" }
    );
    google.accounts.id.prompt();
  };

  async function handleCredentialResponse(response) {
    const userData = parseJwt(response.credential);
    if (userData.email === "ian@ishe-ltd.co.uk") {
      localStorage.setItem("user", JSON.stringify(userData));
      window.location.href = "boss-office.html";
    } else {
      alert("Access Denied: Not authorised");
    }
  }

  function parseJwt(token) {
    const base64Url = token.split('.')[1];
    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
    const jsonPayload = decodeURIComponent(
      atob(base64)
        .split('')
        .map(c => `%${('00' + c.charCodeAt(0).toString(16)).slice(-2)}`)
        .join('')
    );
    return JSON.parse(jsonPayload);
  }
</script>
-->

<!-- üîê LOGIN.HTML PLACEHOLDER -->
<!-- <div id="gSignIn" class="flex justify-center mt-8"></div> (DISABLED) -->

<!-- DISABLED: Supabase OAuth Handler
<!-- Google OAuth Login Handler -->
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
  const supabase = createClient(
    'https://mydxasjcsfetnglbppp.supabase.co',
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im15ZHhhc2ppY3NmZXRuZ2xicHBwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgyMjYyNTQsImV4cCI6MjA3MzgwMjI1NH0.zdJa3T1WDdc6_JNQbh93oB7CnVWa5TQ5jLb1UN-8dLE'
  )
  const loginBtn = document.querySelector('#login-button')
  loginBtn.addEventListener('click', async () => {
    const { error } = await supabase.auth.signInWithOAuth({
      provider: 'google',
    })
    if (error) console.error('Login error:', error.message)
  })
</script>
-->

</body>
</html>
